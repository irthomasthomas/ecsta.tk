var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function f(){return a(" ")}function d(){return a("")}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function g(t,e){(null!=e||t.value)&&(t.value=e)}let $;function v(t){$=t}function y(){if(!$)throw new Error("Function called outside component initialization");return $}function b(){const t=y();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,o)})}}}const k=[],w=[],x=[],z=[],_=Promise.resolve();let E=!1;function q(t){x.push(t)}function T(){const t=new Set;do{for(;k.length;){const t=k.shift();v(t),S(t.$$)}for(;w.length;)w.pop()();for(let e=0;e<x.length;e+=1){const n=x[e];t.has(n)||(n(),t.add(n))}x.length=0}while(k.length);for(;z.length;)z.pop()();E=!1}function S(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const M=new Set;let A;function N(){A={r:0,c:[],p:A}}function U(){A.r||r(A.c),A=A.p}function L(t,e){t&&t.i&&(M.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(M.has(t))return;M.add(t),A.c.push(()=>{M.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function C(t,e){j(t,1,1,()=>{e.delete(t.key)})}function O(t){t&&t.c()}function F(t,n,s){const{fragment:c,on_mount:l,on_destroy:u,after_update:i}=t.$$;c&&c.m(n,s),q(()=>{const n=l.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]}),i.forEach(q)}function I(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(k.push(t),E||(E=!0,_.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,o,s,c,l,u,i=[-1]){const a=$;v(e);const f=o.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:i};let p=!1;var h;d.ctx=s?s(e,f,(t,n,r=n)=>(d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),p&&B(e,t)),n)):[],d.update(),p=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l((h=o.target,Array.from(h.childNodes))):d.fragment&&d.fragment.c(),o.intro&&L(e.$$.fragment),F(e,o.target,o.anchor),T()),v(a)}class H{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function P(e){let n,o,s,a;return{c(){var t;n=i("div"),o=i("form"),h(s=i("input"),"class","search-input svelte-cbjebt"),h(s,"type","search"),h(s,"placeholder","Find artsy stuff for sale on insta"),h(o,"class","search-form"),h(n,"class","search"),a=[p(s,"input",e[2]),p(o,"submit",(t=e[1],function(e){return e.preventDefault(),t.call(this,e)}))]},m(t,r){l(t,n,r),c(n,o),c(o,s),g(s,e[0])},p(t,[e]){1&e&&g(s,t[0])},i:t,o:t,d(t){t&&u(n),r(a)}}}function G(t,e,n){let{query:r}=e,{handleSubmit:o}=e;return t.$set=(t=>{"query"in t&&n(0,r=t.query),"handleSubmit"in t&&n(1,o=t.handleSubmit)}),[r,o,function(){r=this.value,n(0,r)}]}class J extends H{constructor(t){super(),D(this,t,G,P,s,{query:0,handleSubmit:1})}}function K(t){let e,n,r,o,s,a;return{c(){e=i("li"),n=i("a"),h(r=i("img"),"class","photo svelte-15z8ynz"),r.src!==(o=t[0].imgUrl)&&h(r,"src",o),h(r,"alt",s=t[0].link||""),h(n,"href",a=t[0].link),h(n,"crossorigin","anonymous"),h(n,"rel","noopener noreferrer"),h(n,"target","_blank"),h(e,"class","photo-card svelte-15z8ynz")},m(t,o){l(t,e,o),c(e,n),c(n,r)},p(t,e){1&e&&r.src!==(o=t[0].imgUrl)&&h(r,"src",o),1&e&&s!==(s=t[0].link||"")&&h(r,"alt",s),1&e&&a!==(a=t[0].link)&&h(n,"href",a)},d(t){t&&u(e)}}}function Q(t){let e,n,r,o,s,d,g,$,v,y,b,k=t[0].related+"";return{c(){e=i("li"),n=i("img"),s=f(),d=i("div"),g=i("span"),$=a("#"),v=a(k),y=a("2"),h(n,"class","photo svelte-15z8ynz"),n.src!==(r=t[0].imgUrl)&&h(n,"src",r),h(n,"crossorigin","anonymous"),h(n,"alt",o=t[0].related||""),h(g,"class","svelte-15z8ynz"),h(d,"class","ribbon svelte-15z8ynz"),h(e,"class","photo-card svelte-15z8ynz"),b=p(n,"click",t[2])},m(t,r){l(t,e,r),c(e,n),c(e,s),c(e,d),c(d,g),c(g,$),c(g,v),c(g,y)},p(t,e){1&e&&n.src!==(r=t[0].imgUrl)&&h(n,"src",r),1&e&&o!==(o=t[0].related||"")&&h(n,"alt",o),1&e&&k!==(k=t[0].related+"")&&m(v,k)},d(t){t&&u(e),b()}}}function R(t){let e,n,r,o,s,d,g,$,v,y=t[0].rootTag+"";return{c(){e=i("li"),n=i("img"),s=f(),d=i("div"),g=i("span"),$=a(y),h(n,"class","photo svelte-15z8ynz"),n.src!==(r=t[0].imgUrl)&&h(n,"src",r),h(n,"crossorigin","anonymous"),h(n,"alt",o=t[0].rootTag||""),h(g,"class","svelte-15z8ynz"),h(d,"class","ribbon svelte-15z8ynz"),h(e,"class","photo-card svelte-15z8ynz"),v=p(n,"click",t[1])},m(t,r){l(t,e,r),c(e,n),c(e,s),c(e,d),c(d,g),c(g,$)},p(t,e){1&e&&n.src!==(r=t[0].imgUrl)&&h(n,"src",r),1&e&&o!==(o=t[0].rootTag||"")&&h(n,"alt",o),1&e&&y!==(y=t[0].rootTag+"")&&m($,y)},d(t){t&&u(e),v()}}}function V(e){let n;function r(t,e){return t[0].rootTag?R:"False"!=t[0].related?Q:K}let o=r(e),s=o(e);return{c(){s.c(),n=d()},m(t,e){s.m(t,e),l(t,n,e)},p(t,[e]){o===(o=r(t))&&s?s.p(t,e):(s.d(1),(s=o(t))&&(s.c(),s.m(n.parentNode,n)))},i:t,o:t,d(t){s.d(t),t&&u(n)}}}function W(t,e,n){let{photo:r}=e;const o=b();return t.$set=(t=>{"photo"in t&&n(0,r=t.photo)}),[r,function(){o("message",{text:r.rootTag})},function(){o("message",{text:r.related})}]}class X extends H{constructor(t){super(),D(this,t,W,V,s,{photo:0})}}function Y(t,e,n){const r=t.slice();return r[2]=e[n],r}function Z(t,e){let n,r;const o=new X({props:{photo:e[2]}});return o.$on("message",e[1]),{key:t,first:null,c(){n=d(),O(o.$$.fragment),this.first=n},m(t,e){l(t,n,e),F(o,t,e),r=!0},p(t,e){const n={};1&e&&(n.photo=t[2]),o.$set(n)},i(t){r||(L(o.$$.fragment,t),r=!0)},o(t){j(o.$$.fragment,t),r=!1},d(t){t&&u(n),I(o,t)}}}function tt(t){let e,n,r=[],o=new Map,s=t[0];const c=t=>t[2].id;for(let e=0;e<s.length;e+=1){let n=Y(t,s,e),l=c(n);o.set(l,r[e]=Z(l,n))}return{c(){e=i("ul");for(let t=0;t<r.length;t+=1)r[t].c();h(e,"class","search-results svelte-157slzr")},m(t,o){l(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){const s=t[0];N(),r=function(t,e,n,r,o,s,c,l,u,i,a,f){let d=t.length,p=s.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const g=[],$=new Map,v=new Map;for(h=p;h--;){const t=f(o,s,h),l=n(t);let u=c.get(l);u?r&&u.p(t,e):(u=i(l,t)).c(),$.set(l,g[h]=u),l in m&&v.set(l,Math.abs(h-m[l]))}const y=new Set,b=new Set;function k(t){L(t,1),t.m(l,a),c.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],r=e.key,o=n.key;e===n?(a=e.first,d--,p--):$.has(o)?!c.has(r)||y.has(r)?k(e):b.has(o)?d--:v.get(r)>v.get(o)?(b.add(r),k(e)):(y.add(o),d--):(u(n,c),d--)}for(;d--;){const e=t[d];$.has(e.key)||u(e,c)}for(;p;)k(g[p-1]);return g}(r,n,c,1,t,s,o,e,C,Z,null,Y),U()},i(t){if(!n){for(let t=0;t<s.length;t+=1)L(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)j(r[t]);n=!1},d(t){t&&u(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function et(t,e,n){let{results:r}=e;return t.$set=(t=>{"results"in t&&n(0,r=t.results)}),[r,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}]}class nt extends H{constructor(t){super(),D(this,t,et,tt,s,{results:0})}}function rt(e){let n;return{c(){(n=i("div")).innerHTML='<div class="rect1 svelte-1wpfkck"></div> \n  <div class="rect2 svelte-1wpfkck"></div> \n  <div class="rect3 svelte-1wpfkck"></div> \n  <div class="rect4 svelte-1wpfkck"></div> \n  <div class="rect5 svelte-1wpfkck"></div>',h(n,"class","spinner svelte-1wpfkck")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}class ot extends H{constructor(t){super(),D(this,t,null,rt,s,{})}}function st(t){let e;const n=new ot({props:{isLoading:t[2]}});return{c(){O(n.$$.fragment)},m(t,r){F(n,t,r),e=!0},p(t,e){const r={};4&e&&(r.isLoading=t[2]),n.$set(r)},i(t){e||(L(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){I(n,t)}}}function ct(t){let e,n,r,o,s,a;function d(e){t[13].call(null,e)}let p={handleSubmit:t[4]};void 0!==t[0]&&(p.query=t[0]);const m=new J({props:p});w.push(()=>(function(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))})(m,"query",d));const g=new nt({props:{results:t[1]}});g.$on("message",t[3]);let $=t[2]&&st(t);return{c(){e=i("main"),O(m.$$.fragment),r=f(),O(g.$$.fragment),o=f(),s=i("div"),$&&$.c(),h(s,"class","loading-indicator"),h(e,"class","App svelte-1w145k9")},m(t,n){l(t,e,n),F(m,e,null),c(e,r),F(g,e,null),c(e,o),c(e,s),$&&$.m(s,null),a=!0},p(t,[e]){const r={};var o;!n&&1&e&&(n=!0,r.query=t[0],o=(()=>n=!1),z.push(o)),m.$set(r);const c={};2&e&&(c.results=t[1]),g.$set(c),t[2]?$?($.p(t,e),L($,1)):(($=st(t)).c(),L($,1),$.m(s,null)):$&&(N(),j($,1,1,()=>{$=null}),U())},i(t){a||(L(m.$$.fragment,t),L(g.$$.fragment,t),L($),a=!0)},o(t){j(m.$$.fragment,t),j(g.$$.fragment,t),j($),a=!1},d(t){t&&u(e),I(m),I(g),$&&$.d()}}}function lt(t,e,n){let r,o,s="",c=null,l=null,u=[],i=1,a=!1;const f={rootMargin:"0px 0px 300px",threshold:0},d=t=>{t.forEach(t=>{1===i||a||t.isIntersecting&&m()})};var p;function h(){c=s.trim(),n(1,u=[]),l=null,i=1,c&&(r.observe(o),m())}function m(){n(2,a=!0),fetch(`http://157.52.255.203:9090/enqueue?tag=${c}&page=${i}`).then(t=>{if(!t.ok)throw alert(t.statusText),Error(t.statusText);return t.json()}).then(t=>{0!==t.total?(n(1,u=[...u,...t.results]),l=t.total_pages,i<l&&(i+=1)):alert("No photos were found for your search query.")}).catch(()=>alert("${response.statusText} Oh An error occured!")).finally(()=>{n(2,a=!1),i>=Number(l)&&r.unobserve(o)})}return p=(()=>{r=new IntersectionObserver(d,f),o=document.querySelector(".loading-indicator"),c="top10tags",m()}),y().$$.on_mount.push(p),[s,u,a,function(t){n(0,s=t.detail.text),h()},h,c,l,i,r,o,f,d,m,function(t){n(0,s=t)}]}return new class extends H{constructor(t){super(),D(this,t,lt,ct,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map

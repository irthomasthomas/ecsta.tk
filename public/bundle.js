var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function i(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function f(){return a(" ")}function d(){return a("")}function p(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n){n=""+n,t.data!==n&&(t.data=n)}function g(t,n){(null!=n||t.value)&&(t.value=n)}let $;function v(t){$=t}function y(){if(!$)throw new Error("Function called outside component initialization");return $}function b(){const t=y();return(n,e)=>{const r=t.$$.callbacks[n];if(r){const o=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);r.slice().forEach(n=>{n.call(t,o)})}}}const k=[],w=[],x=[],z=[],_=Promise.resolve();let E=!1;function q(t){x.push(t)}function S(){const t=new Set;do{for(;k.length;){const t=k.shift();v(t),T(t.$$)}for(;w.length;)w.pop()();for(let n=0;n<x.length;n+=1){const e=x[n];t.has(e)||(e(),t.add(e))}x.length=0}while(k.length);for(;z.length;)z.pop()();E=!1}function T(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(q)}}const M=new Set;let A;function N(){A={r:0,c:[],p:A}}function U(){A.r||r(A.c),A=A.p}function L(t,n){t&&t.i&&(M.delete(t),t.i(n))}function j(t,n,e,r){if(t&&t.o){if(M.has(t))return;M.add(t),A.c.push(()=>{M.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function C(t,n){j(t,1,1,()=>{n.delete(t.key)})}function F(t){t&&t.c()}function O(t,e,s){const{fragment:c,on_mount:l,on_destroy:i,after_update:u}=t.$$;c&&c.m(e,s),q(()=>{const e=l.map(n).filter(o);i?i.push(...e):r(e),t.$$.on_mount=[]}),u.forEach(q)}function I(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function B(t,n){-1===t.$$.dirty[0]&&(k.push(t),E||(E=!0,_.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function D(n,o,s,c,l,i,u=[-1]){const a=$;v(n);const f=o.props||{},d=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:e(),dirty:u};let p=!1;var h;d.ctx=s?s(n,f,(t,e,r=e)=>(d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),p&&B(n,t)),e)):[],d.update(),p=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l((h=o.target,Array.from(h.childNodes))):d.fragment&&d.fragment.c(),o.intro&&L(n.$$.fragment),O(n,o.target,o.anchor),S()),v(a)}class H{$destroy(){I(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function P(n){let e,o,s,a;return{c(){var t;e=u("div"),o=u("form"),h(s=u("input"),"class","search-input svelte-cbjebt"),h(s,"type","search"),h(s,"placeholder","Find stuff for sale on insta"),h(o,"class","search-form"),h(e,"class","search"),a=[p(s,"input",n[2]),p(o,"submit",(t=n[1],function(n){return n.preventDefault(),t.call(this,n)}))]},m(t,r){l(t,e,r),c(e,o),c(o,s),g(s,n[0])},p(t,[n]){1&n&&g(s,t[0])},i:t,o:t,d(t){t&&i(e),r(a)}}}function G(t,n,e){let{query:r}=n,{handleSubmit:o}=n;return t.$set=(t=>{"query"in t&&e(0,r=t.query),"handleSubmit"in t&&e(1,o=t.handleSubmit)}),[r,o,function(){r=this.value,e(0,r)}]}class J extends H{constructor(t){super(),D(this,t,G,P,s,{query:0,handleSubmit:1})}}function K(t){let n,e,r,o,s,a;return{c(){n=u("li"),e=u("a"),h(r=u("img"),"class","photo svelte-15z8ynz"),r.src!==(o=t[0].imgUrl)&&h(r,"src",o),h(r,"alt",s=t[0].link||""),h(e,"href",a=t[0].link),h(e,"crossorigin","anonymous"),h(e,"rel","noopener noreferrer"),h(e,"target","_blank"),h(n,"class","photo-card svelte-15z8ynz")},m(t,o){l(t,n,o),c(n,e),c(e,r)},p(t,n){1&n&&r.src!==(o=t[0].imgUrl)&&h(r,"src",o),1&n&&s!==(s=t[0].link||"")&&h(r,"alt",s),1&n&&a!==(a=t[0].link)&&h(e,"href",a)},d(t){t&&i(n)}}}function Q(t){let n,e,r,o,s,d,g,$,v,y,b=t[0].related+"";return{c(){n=u("li"),e=u("img"),s=f(),d=u("div"),g=u("span"),$=a("#"),v=a(b),h(e,"class","photo svelte-15z8ynz"),e.src!==(r=t[0].imgUrl)&&h(e,"src",r),h(e,"crossorigin","anonymous"),h(e,"alt",o=t[0].related||""),h(g,"class","svelte-15z8ynz"),h(d,"class","ribbon svelte-15z8ynz"),h(n,"class","photo-card svelte-15z8ynz"),y=p(e,"click",t[2])},m(t,r){l(t,n,r),c(n,e),c(n,s),c(n,d),c(d,g),c(g,$),c(g,v)},p(t,n){1&n&&e.src!==(r=t[0].imgUrl)&&h(e,"src",r),1&n&&o!==(o=t[0].related||"")&&h(e,"alt",o),1&n&&b!==(b=t[0].related+"")&&m(v,b)},d(t){t&&i(n),y()}}}function R(t){let n,e,r,o,s,d,g,$,v,y=t[0].rootTag+"";return{c(){n=u("li"),e=u("img"),s=f(),d=u("div"),g=u("span"),$=a(y),h(e,"class","photo svelte-15z8ynz"),e.src!==(r=t[0].imgUrl)&&h(e,"src",r),h(e,"crossorigin","anonymous"),h(e,"alt",o=t[0].rootTag||""),h(g,"class","svelte-15z8ynz"),h(d,"class","ribbon svelte-15z8ynz"),h(n,"class","photo-card svelte-15z8ynz"),v=p(e,"click",t[1])},m(t,r){l(t,n,r),c(n,e),c(n,s),c(n,d),c(d,g),c(g,$)},p(t,n){1&n&&e.src!==(r=t[0].imgUrl)&&h(e,"src",r),1&n&&o!==(o=t[0].rootTag||"")&&h(e,"alt",o),1&n&&y!==(y=t[0].rootTag+"")&&m($,y)},d(t){t&&i(n),v()}}}function V(n){let e;function r(t,n){return t[0].rootTag?R:"False"!=t[0].related?Q:K}let o=r(n),s=o(n);return{c(){s.c(),e=d()},m(t,n){s.m(t,n),l(t,e,n)},p(t,[n]){o===(o=r(t))&&s?s.p(t,n):(s.d(1),(s=o(t))&&(s.c(),s.m(e.parentNode,e)))},i:t,o:t,d(t){s.d(t),t&&i(e)}}}function W(t,n,e){let{photo:r}=n;const o=b();return t.$set=(t=>{"photo"in t&&e(0,r=t.photo)}),[r,function(){o("message",{text:r.rootTag})},function(){o("message",{text:r.related})}]}class X extends H{constructor(t){super(),D(this,t,W,V,s,{photo:0})}}function Y(t,n,e){const r=t.slice();return r[2]=n[e],r}function Z(t,n){let e,r;const o=new X({props:{photo:n[2]}});return o.$on("message",n[1]),{key:t,first:null,c(){e=d(),F(o.$$.fragment),this.first=e},m(t,n){l(t,e,n),O(o,t,n),r=!0},p(t,n){const e={};1&n&&(e.photo=t[2]),o.$set(e)},i(t){r||(L(o.$$.fragment,t),r=!0)},o(t){j(o.$$.fragment,t),r=!1},d(t){t&&i(e),I(o,t)}}}function tt(t){let n,e,r=[],o=new Map,s=t[0];const c=t=>t[2].id;for(let n=0;n<s.length;n+=1){let e=Y(t,s,n),l=c(e);o.set(l,r[n]=Z(l,e))}return{c(){n=u("ul");for(let t=0;t<r.length;t+=1)r[t].c();h(n,"class","search-results svelte-157slzr")},m(t,o){l(t,n,o);for(let t=0;t<r.length;t+=1)r[t].m(n,null);e=!0},p(t,[e]){const s=t[0];N(),r=function(t,n,e,r,o,s,c,l,i,u,a,f){let d=t.length,p=s.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const g=[],$=new Map,v=new Map;for(h=p;h--;){const t=f(o,s,h),l=e(t);let i=c.get(l);i?r&&i.p(t,n):(i=u(l,t)).c(),$.set(l,g[h]=i),l in m&&v.set(l,Math.abs(h-m[l]))}const y=new Set,b=new Set;function k(t){L(t,1),t.m(l,a),c.set(t.key,t),a=t.first,p--}for(;d&&p;){const n=g[p-1],e=t[d-1],r=n.key,o=e.key;n===e?(a=n.first,d--,p--):$.has(o)?!c.has(r)||y.has(r)?k(n):b.has(o)?d--:v.get(r)>v.get(o)?(b.add(r),k(n)):(y.add(o),d--):(i(e,c),d--)}for(;d--;){const n=t[d];$.has(n.key)||i(n,c)}for(;p;)k(g[p-1]);return g}(r,e,c,1,t,s,o,n,C,Z,null,Y),U()},i(t){if(!e){for(let t=0;t<s.length;t+=1)L(r[t]);e=!0}},o(t){for(let t=0;t<r.length;t+=1)j(r[t]);e=!1},d(t){t&&i(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function nt(t,n,e){let{results:r}=n;return t.$set=(t=>{"results"in t&&e(0,r=t.results)}),[r,function(n){!function(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach(t=>t(n))}(t,n)}]}class et extends H{constructor(t){super(),D(this,t,nt,tt,s,{results:0})}}function rt(n){let e;return{c(){(e=u("div")).innerHTML='<div class="rect1 svelte-1wpfkck"></div> \n  <div class="rect2 svelte-1wpfkck"></div> \n  <div class="rect3 svelte-1wpfkck"></div> \n  <div class="rect4 svelte-1wpfkck"></div> \n  <div class="rect5 svelte-1wpfkck"></div>',h(e,"class","spinner svelte-1wpfkck")},m(t,n){l(t,e,n)},p:t,i:t,o:t,d(t){t&&i(e)}}}class ot extends H{constructor(t){super(),D(this,t,null,rt,s,{})}}function st(t){let n;const e=new ot({props:{isLoading:t[2]}});return{c(){F(e.$$.fragment)},m(t,r){O(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.isLoading=t[2]),e.$set(r)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function ct(t){let n,e,r,o,s,a;function d(n){t[13].call(null,n)}let p={handleSubmit:t[4]};void 0!==t[0]&&(p.query=t[0]);const m=new J({props:p});w.push(()=>(function(t,n,e){const r=t.$$.props[n];void 0!==r&&(t.$$.bound[r]=e,e(t.$$.ctx[r]))})(m,"query",d));const g=new et({props:{results:t[1]}});g.$on("message",t[3]);let $=t[2]&&st(t);return{c(){n=u("main"),F(m.$$.fragment),r=f(),F(g.$$.fragment),o=f(),s=u("div"),$&&$.c(),h(s,"class","loading-indicator"),h(n,"class","App svelte-1w145k9")},m(t,e){l(t,n,e),O(m,n,null),c(n,r),O(g,n,null),c(n,o),c(n,s),$&&$.m(s,null),a=!0},p(t,[n]){const r={};var o;!e&&1&n&&(e=!0,r.query=t[0],o=(()=>e=!1),z.push(o)),m.$set(r);const c={};2&n&&(c.results=t[1]),g.$set(c),t[2]?$?($.p(t,n),L($,1)):(($=st(t)).c(),L($,1),$.m(s,null)):$&&(N(),j($,1,1,()=>{$=null}),U())},i(t){a||(L(m.$$.fragment,t),L(g.$$.fragment,t),L($),a=!0)},o(t){j(m.$$.fragment,t),j(g.$$.fragment,t),j($),a=!1},d(t){t&&i(n),I(m),I(g),$&&$.d()}}}function lt(t,n,e){let r,o,s="",c=null,l=null,i=[],u=1,a=!1;const f={rootMargin:"0px 0px 300px",threshold:0},d=t=>{t.forEach(t=>{1===u||a||t.isIntersecting&&m()})};var p;function h(){c=s.trim(),e(1,i=[]),l=null,u=1,c&&(r.observe(o),m())}function m(){e(2,a=!0),fetch(`http://192.168.43.226:9090/enqueue?tag=${c}&page=${u}`).then(t=>{if(!t.ok)throw Error(t.statusText);return t.json()}).then(t=>{0!==t.total?(e(1,i=[...i,...t.results]),l=t.total_pages,u<l&&(u+=1)):alert("No photos were found for your search query.")}).catch(()=>alert("An error occured!")).finally(()=>{e(2,a=!1),u>=Number(l)&&r.unobserve(o)})}return p=(()=>{r=new IntersectionObserver(d,f),o=document.querySelector(".loading-indicator"),c="top10tags",m()}),y().$$.on_mount.push(p),[s,i,a,function(t){e(0,s=t.detail.text),h()},h,c,l,u,r,o,f,d,m,function(t){e(0,s=t)}]}return new class extends H{constructor(t){super(),D(this,t,lt,ct,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
